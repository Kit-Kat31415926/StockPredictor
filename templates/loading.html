<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
			integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="../static/css/style.css" />
		<title>Stock Predictor</title>
	</head>
	<body>
        <center>
            <br />
            <br />
            <br />
            <h1>Loading...</h1>
            <h3>Please do not refresh or exit the page</h3>
            <br />
            <p id="updated-text"></p>
        </center>
	</body>
    <script>
        /* Send database update request to server on load */
        window.addEventListener('load', () => {
            fetch('/update-database')
            .catch(error => {
                console.log(error);
            });
            
            // Redirect after updating database
            window.location.href = "{{ url_for('home') }}";
        });
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('updated-text').innerHTML = "This might take awhile"
            }, 5000);
        });
    </script>
</html>
